<!DOCTYPE HTML>
<html>
<head>
	<title>MongoDB</title>
	<meta charset="utf-8">
	<meta name="description " content="Версія 2020.04.15. Методичні вказівки для виконання лабораторної роботи з курсу ІТех2 для потоку КІ.">
	<link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body>
	<div class="container">
		<div id="chapters">
			<h1 id="start">Нереляційна СУБД MongoDB і зберігання даних на стороні клієнта</h1>
			<ul>
				<li><a href="#lab_goal">Мета роботи</a></li>
				<li><a href="#lab_manual">Методичні вказівки</a></li>
				<li><a href="#lab_software">Опис лабораторної установки</a></li>
				<li><a href="#lab_execution">Порядок виконання роботи</a></li>
				<li><a href="#lab_variants">Варіанти завдань</a></li>
				<li><a href="#lab_report">Зміст звіту</a></li>
				<li><a href="#lab_questions">Контрольні питання</a></li>
				<li><a href="#lab_literature">Додаткові джерела</a></li>
			</ul>
		</div>
			
		<div class="chapter" id="lab_goal">
			<span class="chapter_name">1. Мета роботи</span>
			<p>Вивчення методів для роботи з нереляційною СУБД MongoDB у мові PHP.</p>
			<p>Знайомство зі зберіганням даних на стороні клієнта, використовуючи WebStorage.</p>
		</div>
		
		<div class="chapter" id="lab_manual">
			<span class="chapter_name">2. Методичні вказівки</span>
			<p>Під час підготовки до виконання лабораторної роботи слід ознайомитися з можливостями нереляційної СУБД MongoDB та особливостями її використання в мові PHP за допомогою MongoDB PHP Library і класів MongoDB\Driver\Manager, MongoDB\Client, MongoDB\Collection.</p>
			<p>Крім того, потрібно ознайомитися з JavaScript-методами setItem і getItem для роботи з веб-сховищами localStorage, для забезпечення запису та отримання даних на стороні клієнта.</p>
		</div>
		
		<div class="chapter" id="lab_software">
			<span class="chapter_name">3. Опис лабораторної установки</span>
			<p>Для виконання лабораторної роботи рекомендується використовувати:</p>
			<ul>
				<li>текстовий редактор, що має підсвічування синтаксису: Notepad++ чи Visual Studio Code;</li>
				<li>браузер: Mozilla Firefox чи Google Chrome;</li>
				<li>СУБД: MongoDB 3.6.0;</li>
				<li>PHP 7.3 і менеджер пакетів Composer;</li>
				<li>збірка веб-сервера: XAMPP чи OpenServer (у складі OpenServer уже може бути встановлено MongoDB).</li>
			</ul>
			<p>Рекомендовані засоби є вільним програмним забезпеченням.</p>
			<p>Для виконання лабораторної роботи не потрібен доступ до мережі Інтернет.</p>
		</div>
		
		<div class="chapter" id="lab_execution">
			<span class="chapter_name">4. Порядок виконання роботи</span>
			<ol>
				<li>Запустити сервер MongoDB, додаток mongod, яке знаходиться в папці bin. Ймовірно, повний шлях буде <span class = "code_snippet">C:\Program Files\MongoDB\Server\3.6\bin\mongod.exe</span>. Переконатися, що сервер готовий до підключень (наприкінці виведення консолі має бути рядок <span class = "code_snippet">waiting for connections on port 27017</span>). Не закривати сервер до завершення роботи.</li>
				<li>Запустити консольну оболонку MongoDB, додаток mongo.exe, яке знаходиться в папці bin встановленої СУБД MongoDB. Перевірити наявні бази даних (команда <span class = "code_snippet">show dbs</span>), створити БД для виконання лабораторної роботи (<span class = "code_snippet">use dbforlab</span>), створити колекцію (або колекції), використовуючи явну команду <span class = "code_snippet">db.createCollection('somecollection')</span> або створюючи колекцію неявно, під час подальшого додавання документів. Заповнити колекцію документами, що відповідають завданню, використовуючи команди save, insert або load. Перевірити заповнення БД, використовуючи команду find.
				</li>
				<li>Проверить выполнение в консоли запросов на выборку согласно варианту. Использовать средства для ограничения выборки документов и управления отображением (отключение вывода ненужных полей, модификатор pretty и т.д.).</li>
				<li>Використовуючи консоль мови PHP, перейти до каталогу проекту та виконати команду <span class = "code_snippet">composer require mongodb/mongodb</span>, що призведе (за наявності встановленого менеджера пакетів Composer) до появи в каталозі проєкту папки vendor з файлами бібліотеки для роботи з MongoDB. Для використання встановленої бібліотеки в php-файлах проєкту потрібно додати її підключення <span class = "code_snippet">require_once __DIR__ . "/vendor/autoload.php";</span></li>
				<li>Створити веб-додаток, що запитує у користувача параметри для запитів і виводить їхні результати. Можливе повторне використання коду елементів сторінки з лабораторної роботи з PDO. Використовуються тільки запити на вибірку.</li>
				<li>Реалізувати роботу з даними на стороні клієнта. Після вказівки користувачем параметра запиту (виборі елемента списку, що випадає, введенні значення текстового поля і т.д.) у нього має бути можливість подивитися раніше збережені результати для аналогічного запиту. Для цього на сторінку слід додати елементи для виведення раніше збережених у localStorage даних (якщо вони є, або повідомлення про їхню відсутність).<!-- кнопка, після натискання на яку буде в певне місце поточної веб-сторінки виводитися вміст localStorage для аналогічного запиту з саме такими параметрами, якщо він уже виконувався в минулому.Незалежно від того, чи є раніше збережені результати, користувач може так само відправити запит на сервер, і отримати результат. Результати запитів, з урахуванням параметрів, мають бути збережені у локальному сховищі. --></li>
			</ol>
			<div class="variants">Завдання для лабораторної є індивідуальними. Можливе спільне виконання в бригаді варіантів <b>усіх</b> її учасників. Номер варіанта студента розраховується через залишок від ділення його номера в журналі академгрупи на кількість доступних варіантів. У даній лабораторній роботі, номер свого варіанту можна дізнатися як N%10, де N &dash; номер у журналі академічної групи, або скористатися табличкою (<input type="checkbox" class="view-variants"> показати).
				<table>
					<tr>
						<th>Номер за журналом</th>
						<th>Варіант завдання</th>
						<th rowspan="16">&nbsp;</th>
						<th>Номер за журнало</th>
						<th>Варіант завдання</th>
					</tr>
					<tr>
						<td>1</td>
						<td>1</td>
						<td>16</td>
						<td>6</td>
					</tr>
					<tr>
						<td>2</td>
						<td>2</td>
						<td>17</td>
						<td>7</td>
					</tr>
					<tr>
						<td>3</td>
						<td>3</td>
						<td>18</td>
						<td>8</td>
					</tr>
					<tr>
						<td>4</td>
						<td>4</td>
						<td>19</td>
						<td>9</td>
					</tr>
					<tr>
						<td>5</td>
						<td>5</td>
						<td>20</td>
						<td>0</td>
					</tr>
					<tr>
						<td>6</td>
						<td>6</td>
						<td>21</td>
						<td>1</td>
					</tr>
					<tr>
						<td>7</td>
						<td>7</td>
						<td>22</td>
						<td>2</td>
					</tr>
					<tr>
						<td>8</td>
						<td>8</td>
						<td>23</td>
						<td>3</td>
					</tr>
					<tr>
						<td>9</td>
						<td>9</td>
						<td>24</td>
						<td>4</td>
					</tr>
					<tr>
						<td>10</td>
						<td>0</td>
						<td>25</td>
						<td>5</td>
					</tr>
					<tr>
						<td>11</td>
						<td>1</td>
						<td>26</td>
						<td>6</td>
					</tr>
					<tr>
						<td>12</td>
						<td>2</td>
						<td>27</td>
						<td>7</td>
					</tr>
					<tr>
						<td>13</td>
						<td>3</td>
						<td>28</td>
						<td>8</td>
					</tr>
					<tr>
						<td>14</td>
						<td>4</td>
						<td>29</td>
						<td>9</td>
					</tr>
					<tr>
						<td>15</td>
						<td>5</td>
						<td>30</td>
						<td>0</td>
					</tr>
				</table>
			</div>
			<div>Відпрацювання виставляється після спільної зі студентом перевірки роботи проєкту, відповідей на запитання щодо коду та отримання викладачем посилання на репозиторій проєкту на GitHub, виконаного відповідно до всіх завдань цього розділу..</div>
			<!-- <p>Результат роботи демонструється в електронному вигляді.</p> -->
		</div>

		<div class="chapter" id="lab_variants">
			<span class="chapter_name">5. Варіанти завдань</span>
			<br>
			<p><b>Варіанти 0.</b> Створити та заповнити БД для зберігання інформації про літературні ресурси бібліотеки (книжках, газетах, журналах тощо). Для опису безлічі літературних ресурсів достатньо використовувати одну колекцію. Кожен ресурс, представлений у вигляді документа у складі колекції, характеризується набором властивостей (і кожен, можливо, своїм власним, особливим набором). Наприклад, книги можуть характеризуватися назвою, унікальним номером (ISBN), видавництвом, роком видання, кількістю сторінок, автором (авторів може бути більше одного). У якихось книг якоїсь із перелічених для прикладу властивостей може і не бути, або бути якась нова властивість (наприклад, наявність у комплекті диска). Журнали характеризуються зазвичай назвою, роком випуску, номером. Пам'ятайте, що немає жорсткого обмеження на однаковий набір полів для різних ресурсів, користуйтеся перевагами MongoDB. Запити на вибірку припускають, що необхідні поля будуть у якоїсь частини документів у колекції - але зовсім не обов'язково, що у всіх.</p>
			<p>Надати користувачеві можливість отримання інформації про:</p>
			<ul>
				<li>літературі зазначеного видавництва;</li>
				<li>літературі, опублікованій за вказаний часовий період (враховувати рік видання);</li>
				<li>літературі зазначеного автора.</li>
			</ul>
			<br>
			<p><b>Варіант 1.</b> Створити та заповнити БД для зберігання інформації про розклад занять (достатньо однієї колекції). Кожне заняття описується датою проведення, часом (вказується номер пари), аудиторією, дисципліною, типом (лекція, лабораторна, залік тощо), групою (груп може бути більше однієї - наприклад, для лекцій це нормальне явище), викладачем (він також може бути вказаний не один).</p>
			<p>Надати користувачеві можливість отримання інформації про розклад занять для:</p>
			<ul>
				<li>лабораторних робіт обраної зі списку групи;</li>
				<li>лекцій зазначеного викладача із зазначеної дисципліни;</li>
				<li>аудиторії.</li>
				<!-- <li>вільної аудиторії на задану дату і пару.</li> -->
			</ul>
			<br>
			<p><b>Варіант 2.</b> Створити та заповнити БД для зберігання інформації про роботу над завданнями. Кожне завдання належить до якогось проєкту, і описується назвою, коротким описом, працівником, який виконував проєкт (може бути більше одного), керівником, відповідальним за проєкт на момент виконання цього завдання, часом початку і часом завершення роботи. Для зберігання дати і часу в БД рекомендується використовувати формат Unix Timestamp.</p>
			<p>Надати користувачеві можливість отримання інформації о:</p>
			<ul>
				<li>виконані завдання за обраним проєктом на зазначену дату;</li>
				<li>кількості проєктів зазначеного керівника;</li>
				<li>співробітників, які працювали під керівництвом обраного керівника.</li>
			</ul>
			<br>
			<p><b>Варіант 3.</b> Створити і заповнити БД для зберігання інформації про чергування в поліклініці. Чергування описується зміною (перша, друга, третя<!-- і не тільки -->), датою, задіяними медсестрами (щонайменше однією), назвою відділення, номерами палат, що використовуються на цьому чергуванні.</p>
			<p>Надати користувачеві можливість отримання такої інформації:</p>
			<ul>
				<li>перелік палат, у яких чергує обрана медсестра;</li><!-- у зазначену дату -->
				<li>медсестри, які чергували в зазначеному відділенні;</li>
				<li>усіх чергуваннях (у будь-яких палатах) у зазначену зміну в зазначеному відділенні.</li>
			</ul>
			<br>
			<p><b>Варіант 4.</b> Створити і заповнити БД домашньої фільмотеки, що містить інформацію про наявні фільми, серіали, мультсеріали тощо. Об'єкти фільмотеки описуються назвою, роком виходу, типом носія (відеокасета, CD, DVD, BR) і довільним набором параметрів, серед яких режисер, актори (може бути більше одного), жанр (може бути більше одного), країна випуску тощо..</p>
			<p>Надати користувачеві можливість отримання такої інформації:</p>
			<ul>
				<li>що можна подивитися на відеокасетах;</li>
				<li>у яких фільмах брав участь обраний актор;</li>
				<li>що подивитися з нового (що вийшло цього року).</li>
			</ul>
			<br>
			<p><b>Варіант 5.</b> Створити і заповнити БД товарів інтернет-магазину (в одній колекції). Для товару обов'язково вказується назва, ціна товару, кількість одиниць на складі. Можливі поля - фірма-виробник, категорія товару (процесори, материнські плати тощо), відгуки (можуть бути і більше одного), стан (новий або б/в) тощо.</p>
			<p>Надати користувачеві можливість отримання такої інформації:</p>
			<ul>
				<li>перелік виробників, з якими працює магазин;</li>
				<li>товари, відсутні на складі (тобто взагалі вони є, але зараз кількість 0);</li>
				<li>товари в обраному ціновому діапазоні.</li>
			</ul>
			<br>
			<p><b>Варіант 6.</b> Створити і заповнити БД пункту прокату автомобілів. У базі представлено дві колекції - колекція документів, що описує оренду (дата початку і завершення, вартість оренди і марка машини), і колекція, що містить документи, які описують наявні в пункті прокату автомобілі (марка, рік випуску, пробіг, стан (можливе поле)). Для зберігання дати і часу в БД рекомендується використовувати формат Unix Timestamp.</p>
			<p>Надати користувачеві можливість отримання такої інформації:</p>
			<ul>
				<li>отриманий дохід з прокату станом на обрану дату;</li>
				<li>автомобілі з пробігом, меншим за вказаний;</li>
				<li>наявні в цьому пункті марки автомобілів.</li>
			</ul>
			<br>
			<p><b>Варіант 7.</b> Створити і заповнити БД футбольного чемпіонату. У базі представлено дві колекції - колекція документів, що описує команди (назва, тренер, склад команди (масив футболістів)), і колекція, яка містить документи, що описують ігри чемпіонату (ліга, дата і місце проведення, команди-учасниці гри, переможець тощо)..</p>
			<p>Надати користувачеві можливість отримання такої інформації:</p>
			<ul>
				<li>таблиця чемпіонату для обраної ліги;</li>
				<li>список футболістів зазначеної команди;</li>
				<li>список ігор, у яких брала участь обрана команда.</li>
			</ul>
			<br>
			<p><b>Варіант 8.</b> Створити і заповнити БД для зберігання інформації про використання мережевого трафіку. У базі представлено дві колекції - колекція документів, що описує користувачів (логін, пароль, статичну IP-адресу клієнта, баланс рахунка, повідомлення), і колекція, яка містить документи, що описують сеанси виходу в Мережу: час початку й закінчення сеансу роботи, кількість вхідного трафіку, кількість вихідного трафіку, IP-адресу клієнта, вартість сеансу.</p>
			<p>Надати користувачеві можливість отримання такої інформації:</p>
			<ul>
				<li>повідомлення від обраного клієнта;</li>
				<li>загальний вхідний і вихідний трафік;</li>
				<li>вивести список клієнтів з від'ємним балансом рахунку.</li>
			</ul>
			<br>
			<p><b>Варіант 9.</b> Створити і заповнити БД для зберігання інформації про комп'ютери організації. У БД представлено одну колекцію, документи якої описують комп'ютери організації - інвентарний номер, рік придбання, термін гарантії, процесор, пам'ять, об'єм диска, встановлене ліцензійне ПЗ тощо.</p>
			<p>Надати користувачеві можливість отримання такої інформації:</p>
			<ul>
				<li>список комп'ютерів із заданим типом центрального процесора;</li>
				<li>список комп'ютерів зі встановленим ПЗ (назву ПЗ вибирають із переліку);</li>
				<li>список комп'ютерів з вичерпаним гарантійним терміном.</li>
			</ul>
		</div>
		
		<div class="chapter" id="lab_report">
			<span class="chapter_name">6. Зміст звіту</span>
			<ul>
				<li>титульний аркуш із зазначенням теми лабораторної, прізвища, ініціалів і групи студентів, які виконали (до 3-х осіб);</li> 
				<li>мета роботи;</li> 
				<li>варіант завдання;</li>
				<li>використовувані команди консолі MongoDB для створення і заповнення БД;</li>
				<li>вихідні коди РНР і JavaScript скриптів;</li>
				<li>результати виконання запитів у вигляді знімків екрана браузера;</li>
				<li>висновки по роботі.</li>
			</ul>
			<p>Допускається здача звіту в електронному вигляді. Для захисту наявність роздрукованого звіту не є необхідною. При викладанні на GitHub не забувайте про вміст БД, що використовується вашим кодом.</p>
		</div>
		
		<div class="chapter" id="lab_questions">
			<span class="chapter_name">7. Контрольні питання</span>
			<ol>
				<li>Які NoSQL СУБД вам відомі?</li>
				<li>Як, використовуючи консоль MongoDB, створити і заповнити нову БД? Як виконати пошук і зміну записів?</li>
				<li>Які можливості мови PHP для роботи з NoSQL СУБД MongoDB вам відомі?</li>
				<li>Яким чином здійснюється керування підключеннями до баз даних?</li>
				<li>У чому різниця між методами find і findOne?</li>
				<li>Оператори для фільтрації вибірки та їх використання.</li>
				<li>Як обмежити вибірку заданим числом документів?</li>
				<li>Як відсортувати документи у вибірці за зростанням значення певного поля?</li>
				<li>Як прибрати відображення непотрібних (у цьому запиті) полів документа?</li>
				<li>Як додати безліч документів у колекцію?</li>
				<li>Для чого використовується об'єкт MongoDB\UpdateResult?</li>
				<li>Чи можлива відсутність модифікованих документів при успішному виконанні методу updateOne і getMatchedCount більше 0?</li>
				<li>У чому полягає операція Upsert?</li>
				<li>Як видалити документи колекції?</li>
				<li>Переваги та недоліки використання WebStorage?</li>
				<li>У чому різниця між localStorage і sessionStorage?</li>
				<li>Як зберегти дані у сховищі WebStorage?</li>
				<li>Чи можна зберігати в сховищі не-рядкові дані?</li>
				<li>Для чого використовуються методи JSON.stringify і JSON.parse?</li>
				<li>У яких випадках виникає подія storage?</li>
				<li>Що відбувається під час переповнення сховища?</li>				
			</ol>
			<p>Знання відповідей на наведені запитання є необхідною, але не достатньою умовою для отримання високої оцінки за захист лабораторної роботи. Пам'ятайте про теми, розглянуті на лекціях!</p>
		</div>
		
		<div class="chapter" id="lab_literature">
			<span class="chapter_name">СПИСОК ЛІТЕРАТУРИ</span>
			<ol>  
				<li><a href="http://coldfox.ru/article/5be022d49227d914a1c83fe3/Подробное-руководство-по-MongoDB-Mongoose" target="_blank">Докладний посібник із MongoDB</a></li>
				<li><a href="https://habr.com/ru/post/144798/" target="_blank">Моделювання даних у MongoDB</a></li>
				<li><a href="https://metanit.com/nosql/mongodb/" target="_blank">Онлайн-керівництво з MongoDB</a></li>
				<li><a href="https://dzone.com/articles/top-10-most-common-commands-for-beginners" target="_blank">Commands for MongoDB Beginners</a></li>
				<li><a href="http://gearmobile.github.io/tags/#mongodb" target="_blank">Цикл статей про роботу з Монго</a></li>
				<li><a href="https://getcomposer.org/" target="_blank">Dependency Manager for PHP</a></li>
				<li><a href="https://docs.mongodb.com/php-library/v1.5/tutorial/install-php-library/" target="_blank">MongoDB PHP Library</a></li>
				<li><a href="https://docs.mongodb.com/manual/crud/" target="_blank">MongoDB CRUD Operations</a></li>
				<li><a href="https://www.php.net/manual/ru/mongodb.tutorial.library.php" target="_blank">Використання бібліотеки PHP для MongoDB</a></li>
				<li><a href="https://learn.javascript.ru/localstorage" target="_blank">LocalStorage, sessionStorage</a></li>
				<li><a href="https://html5css.ru/html/html5_webstorage.php" target="_blank">HTML5 Веб-сховище</a></li>
				<li><a href="https://developer.mozilla.org/ru/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API" target="_blank">Використання WebStorage API</a></li>
			</ol>
		</div>
		<br><a href="#start">Повернутися до початку</a>
		<br><a href="..\..\index.html">Повернутися на стартову сторінку ресурсу</a>
		<!-- Вдалого відпрацювання! --> 
	</div>
</body>
</html>
