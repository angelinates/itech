<!DOCTYPE HTML>
<html>
<head>
	<title>MongoDB</title>
	<meta charset="utf-8">
	<meta name="description " content="Версия 2020.04.15. Методические указания для выполнения лабораторной работы по курсу ИТех2 для потока КИ.">
	<link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body>
	<div class="container">
		<div id="chapters">
			<h1 id="start">Нереляционная СУБД MongoDB и хранение данных на стороне клиента</h1>
			<ul>
				<li><a href="#lab_goal">Цель работы</a></li>
				<li><a href="#lab_manual">Методические указания</a></li>
				<li><a href="#lab_software">Описание лабораторной установки</a></li>
				<li><a href="#lab_execution">Порядок выполнения работы</a></li>
				<li><a href="#lab_variants">Варианты заданий</a></li>
				<li><a href="#lab_report">Содержание отчета</a></li>
				<li><a href="#lab_questions">Контрольные вопросы</a></li>
				<li><a href="#lab_literature">Дополнительные источники</a></li>
			</ul>
		</div>
			
		<div class="chapter" id="lab_goal">
			<span class="chapter_name">1. Цель работы</span>
			<p>Изучение методов для работы с нереляционной СУБД MongoDB в языке PHP.</p>
			<p>Знакомство с хранением данных на стороне клиента, используя WebStorage.</p>
		</div>
		
		<div class="chapter" id="lab_manual">
			<span class="chapter_name">2. Методические указания</span>
			<p>При подготовке к выполнению лабораторной работы следует ознакомиться с возможностями нереляционной СУБД MongoDB и особенностями ее использования в языке PHP с помощью MongoDB PHP Library и классов MongoDB\Driver\Manager, MongoDB\Client, MongoDB\Collection.</p>
			<p>Кроме того, требуется ознакомиться с JavaScript-методами setItem и getItem для работы с веб-хранилищами localStorage, для обеспечения записи и получения данных на стороне клиента.</p>
		</div>
		
		<div class="chapter" id="lab_software">
			<span class="chapter_name">3. Описание лабораторной установки</span>
			<p>Для выполнения лабораторной работы рекомендуется использовать:</p>
			<ul>
				<li>текстовый редактор, имеющий подсветку синтаксиса: Notepad++ или Visual Studio Code;</li>
				<li>браузер: Mozilla Firefox или Google Chrome;</li>
				<li>СУБД: MongoDB 3.6.0;</li>
				<li>PHP 7.3 и менеджер пакетов Composer;</li>
				<li>сборка веб-сервера: XAMPP или OpenServer (в составе OpenServer уже может быть установлена MongoDB).</li>
			</ul>
			<p>Рекомендуемые средства являются свободным программным обеспечением.</p>
			<p>Для выполнения лабораторной работы не требуется доступ к сети Интернет.</p>
		</div>
		
		<div class="chapter" id="lab_execution">
			<span class="chapter_name">4. Порядок выполнения работы</span>
			<ol>
				<li>Запустить сервер MongoDB, приложение mongod, которое находится в папке bin. Вероятно, полный путь будет <span class = "code_snippet">C:\Program Files\MongoDB\Server\3.6\bin\mongod.exe</span>. Убедиться, что сервер готов к подключениям (в конце вывода консоли долна быть строка <span class = "code_snippet">waiting for connections on port 27017</span>). Не закрывать сервер до завершения работы.</li>
				<li>Запустить консольную оболочку MongoDB, приложение mongo.exe, которое находится в папке bin установленной СУБД MongoDB. Проверить имеющиеся базы данных (команда <span class = "code_snippet">show dbs</span>), создать БД для выполнения лабораторной работы (<span class = "code_snippet">use dbforlab</span>), создать коллекцию (или коллекции), используя явную команду <span class = "code_snippet">db.createCollection('somecollection')</span> или создавая коллекцию неявно, при последующем добавлении документов. Заполнить коллекцию документами, соответствующими заданию, используя команды save, insert или load. Проверить заполнение БД, используя команду find.
				</li>
				<li>Проверить выполнение в консоли запросов на выборку согласно варианту. Использовать средства для ограничения выборки документов и управления отображением (отключение вывода ненужных полей, модификатор pretty и т.д.).</li>
				<li>Используя консоль языка PHP, перейти в каталог проекта и выполнить команду <span class = "code_snippet">composer require mongodb/mongodb</span>, что приведет (при наличии установленного менеджера пакетов Composer) к появлению в каталоге проекта папки vendor с файлами библиотеки для работы с MongoDB. Для использования установленной библиотеки в php-файлах проекта потребуется добавить ее подключение <span class = "code_snippet">require_once __DIR__ . "/vendor/autoload.php";</span></li>
				<li>Создать веб-приложение, запрашивающее у пользователя параметры для запросов и выводящее их результаты. Возможно повторное использование кода лабораторной работы по PDO. Используются только запросы на выборку.</li>
				<li>Реализовать работу с данными на стороне клиента. После указания пользователем параметра запроса (выборе элемента выпадающего списка, вводе значения текстового поля и т.д.) у него должна быть возможность посмотреть ранее сохраненные результаты для аналогичного запроса, если они были. Для этого надо добавить элементы для вывода ранее сохраненных данных (если они есть). Т.е. кнопка, по нажатию на которую будет в определенное место текущей веб-страницы выводиться содержимое localStorage для аналогичного запроса с именно такими параметрами, если он уже выполнялся в прошлом. Независимо от того, есть ли ранее сохраненные результаты, пользователь может все так же отправить запрос на сервер, и получить его результаты. Эти результаты, с учетом параметров запроса, должны быть сохранены в локальном хранилище.</li>
			</ol>
			<div class="variants">Задания для лабораторной являются индивидуальными. Возможно совместное выполнение в бригаде вариантов <b>всех</b> ее участников. Номер варианта студента рассчитывается через остаток от деления его номера в журнале академгруппы на количество доступных вариантов. В данной лабораторной работе, номер своего варианта можно узнать как N%10, где N &dash; номер в журнале академической группы, или воспользоваться табличкой (<input type="checkbox" class="view-variants"> показать).
				<table>
					<tr>
						<th>Номер по журналу</th>
						<th>Вариант задания</th>
						<th rowspan="16">&nbsp;</th>
						<th>Номер по журналу</th>
						<th>Вариант задания</th>
					</tr>
					<tr>
						<td>1</td>
						<td>1</td>
						<td>16</td>
						<td>6</td>
					</tr>
					<tr>
						<td>2</td>
						<td>2</td>
						<td>17</td>
						<td>7</td>
					</tr>
					<tr>
						<td>3</td>
						<td>3</td>
						<td>18</td>
						<td>8</td>
					</tr>
					<tr>
						<td>4</td>
						<td>4</td>
						<td>19</td>
						<td>9</td>
					</tr>
					<tr>
						<td>5</td>
						<td>5</td>
						<td>20</td>
						<td>0</td>
					</tr>
					<tr>
						<td>6</td>
						<td>6</td>
						<td>21</td>
						<td>1</td>
					</tr>
					<tr>
						<td>7</td>
						<td>7</td>
						<td>22</td>
						<td>2</td>
					</tr>
					<tr>
						<td>8</td>
						<td>8</td>
						<td>23</td>
						<td>3</td>
					</tr>
					<tr>
						<td>9</td>
						<td>9</td>
						<td>24</td>
						<td>4</td>
					</tr>
					<tr>
						<td>10</td>
						<td>0</td>
						<td>25</td>
						<td>5</td>
					</tr>
					<tr>
						<td>11</td>
						<td>1</td>
						<td>26</td>
						<td>6</td>
					</tr>
					<tr>
						<td>12</td>
						<td>2</td>
						<td>27</td>
						<td>7</td>
					</tr>
					<tr>
						<td>13</td>
						<td>3</td>
						<td>28</td>
						<td>8</td>
					</tr>
					<tr>
						<td>14</td>
						<td>4</td>
						<td>29</td>
						<td>9</td>
					</tr>
					<tr>
						<td>15</td>
						<td>5</td>
						<td>30</td>
						<td>0</td>
					</tr>
				</table>
			</div>
			<div>Отработка выставляется после совместной со студентом проверки работы проекта и получения преподавателем ссылки на GitHub/Bitbucket репозиторий проекта, выполненного в соответствии со всеми заданиями этого раздела.</div>
			<!-- <p>Результат работы демонстрируется в электронном виде.</p> -->
		</div>

		<div class="chapter" id="lab_variants">
			<span class="chapter_name">5. Варианты заданий</span>
			<br>
			<p><b>Вариант 0.</b> Создать и заполнить произвольными данными БД для хранения информации об информационных ресурсах библиотеки (Рисунок 5.0).</p>
			<p>Различают 3 вида ресурсов: книги, журналы, газеты. Книги характеризуются названием, уникальным номером (ISBN), издательством, годом издания, количеством страниц. У книги может быть произвольное количество авторов. Журналы характеризуются названием, годом выпуска, номером. Газеты характеризуются названием и датой выхода (день, месяц, год). Книги и журналы могут содержать дополнительные информационные ресурсы (например, компакт-диски), которые учитываются и регистрируются отдельно.</p>
			<p>Сформировать запросы, которые будут выводить на экран информацию о:</p>
			<ul>
				<li>книгах указанного издательства;</li>
				<li>книгах, журналах и газетах, опубликованных за указанный временной период (учитывать год издания);</li>
				<li>книгах указанного автора.</li>
			</ul>
			<figure class="pic_w_caption">
				<img src="images/2.3_assigment1_bgless.png">
				<figcaption>Рисунок 5.0 – Структура базы данных «Библиотека»</figcaption>
			</figure>
			<br>
			<p><b>Вариант 1.</b> Импортировать БД для хранения <a href="Additional/iteh2lb1var2.sql">информации о расписании проведения занятий</a> (Рисунок 5.1).</p>
			<p>Для каждого занятия задается день недели, номер пары, аудитория, группа, дисциплина, вид занятия. Различают 3 вида занятий – лекции (1 преподаватель ведет занятия с 1 и более группами), практические занятия (1 преподаватель работает с 1 группой), лабораторные занятия (2 преподавателя работают с 1 группой).</p>
			<!-- <p><b>Вариант 2.</b> Создать структуру базы данных для хранения информации о расписании проведения занятий (Рисунок 1.2).</p>
			<p>Для каждого занятия задается день недели, номер пары, аудитория, группа, дисциплина, вид занятия. Различают 3 вида занятий – лекции (1 преподаватель ведет занятия с 1 и более группами), практические занятия (1 преподаватель работает с 1 группой), лабораторные занятия (2 преподавателя работают с 1 группой).</p> -->
			<p>Сформировать запросы и вывести расписание занятий для:</p>
			<ul>
				<li>произвольной группы из списка;</li>
				<li>произвольного преподавателя из списка;</li>
				<li>аудитории из списка.</li>
			</ul>
			<p>Обеспечить возможность добавления новых практических занятий (с указанием существующих группы и преподавателя) в БД средствами веб-приложения. Обратите внимание на работу с ключевыми полями.</p>
			<figure class="pic_w_caption">
				<img src="images/2.4_assigment2_bgless.png">
				<figcaption>Рисунок 5.1 – Структура базы данных «Расписание занятий»</figcaption>
			</figure>
			<br>
			<p><b>Вариант 2.</b> Создать и заполнить произвольными данными БД для хранения информации о времени работы над проектом каждого сотрудника (Рисунок 5.2).</p>
			<p>Различают 3 вида сотрудников:</p>
			<ul>
				<li>начальник отдела (может просматривать информацию о времени работы над проектами всех подчиненных);</li>
				<li>менеджер проекта (может просматривать информацию о времени работы над проектом каждого разработчика);</li>
				<li>разработчик – может помещать в базу информацию о времени работы над проектом.</li>
			</ul>
			<p>Организация может одновременно вести несколько проектов. Каждый сотрудник может быть вовлечен в работу над несколькими проектами и выполнять разные роли (например, начальник отдела может быть менеджером одного проекта и разработчиком в другом).</p>
			<p>Сформировать запросы и вывести результаты:</p>
			<ul>
				<li>информация о выполненных задачах по выбранному проекту на указанную дату;</li>
				<li>общее время работы над выбранным проектом;</li>
				<li>число сотрудников отдела выбранного руководителя.</li>
			</ul>
			<figure class="pic_w_caption">
				<img src="images/2.5_assigment3_bgless.png">
				<figcaption>Рисунок 5.2 – Структура базы данных «Работа сотрудников»</figcaption>
			</figure>
			<br>
			<p><b>Вариант 3.</b> Импортировать БД для хранения <a href="Additional/iteh2lb1var4.sql">информации о сменах дежурств в поликлинике</a> (Рисунок 5.3).</p>
			<p>Для медсестры указаны ее имя, отделение и рабочая смена (первая, вторая или третья). Для палаты (hospital ward) - название (номер). Медсестры могут работать в разных палатах, в одной палате может быть более одной медсестры.</p>
			<p>Сформировать запросы и вывести результаты:</p>
			<ul>
				<li>перечень палат, в которых дежурит выбранная медсестра;</li>
				<li>медсестры выбранного отделения;</li>
				<li>дежурства (в любых палатах) в указанную смену.</li>
			</ul>
			<p>Обеспечить возможность добавления новых медсестер и палат в БД средствами веб-приложения. Возможность назначения выбранной медсестры в указанную палату. Обратите внимание на работу с ключевыми полями.</p>
			<figure class="pic_w_caption">
				<img src="images/2.6_assigment4_bgless.png">
				<figcaption>Рисунок 5.3 – Структура базы данных «Смена дежурств» <i>(с ошибкой, не хватает поля в таблице ward)</i></figcaption>
			</figure>
			<br>
			<p><b>Вариант 4.</b> Создать и заполнить произвольными данными БД для хранения информации о фильмотеке (Рисунок 1.4).</p>
			<p>Для фильма задается название, жанр (может быть более чем один), год выхода, страна, качество, тип носителя (видеокассета, CD, DVD, BR). Для цифровых носителей определяется разрешение в пикселях и типы применяемых кодеков. Также для фильма может задаваться дополнительная информация, такая как: продюсер, режиссер и актеры (произвольное количество).</p>
			<p>Сформировать запросы и вывести результаты:</p>
			<ul>
				<li>список фильмов выбранного жанра;</li>
				<li>список фильмов с выбранным актером;</li>
				<li>список фильмов за указанный временной интервал.</li>
			</ul>
			<figure class="pic_w_caption">
				<img src="images/2.7_assigment5_bgless.png">
				<figcaption>Рисунок 5.4 – Структура базы данных «Фильмотека»</figcaption>
			</figure>
			<br>
			<p><b>Вариант 5.</b> Создать и заполнить произвольными данными БД для хранения информации о товарах в интернет–магазине (Рисунок 5.5).</p>
			<p>Для товара задается название, фирма-производитель, категория товара (процессоры, материнские платы и т.д.), цена товара, количество единиц на складе.</p>
			<p>Сформировать запросы и вывести результаты:</p>
			<ul>
				<li>товары выбранного производителя;</li>
				<li>товары выбранной категории;</li>
				<li>товары в выбранном ценовом диапазоне.</li>
			</ul>
			<figure class="pic_w_caption">
				<img src="images/2.8_assigment6_bgless.png">
				<figcaption>Рисунок 5.5 – Структура базы данных «Товары в магазине»</figcaption>
			</figure>
			<br>
			<p><b>Вариант 6.</b> Импортировать БД для хранения <a href="Additional/iteh2lb1var7.sql">информации о пункте проката машин</a> (Рисунок 5.6).</p>
			<p>В базе данных задается название машины, производитель, год выпуска, пробег, состояние, стоимость аренды (в час и за сутки), время аренды автомобиля.</p>
			<p>Сформировать запросы и вывести результаты:</p>
			<ul>
				<li>полученный доход с проката по состоянию на выбранную дату;</li>
				<li>автомобили выбранного производителя;</li>
				<li>свободные автомобили на выбранную дату.</li>
			</ul>
			<p>Обеспечить возможность добавления в БД средствами веб-приложения информации об аренде для выбранного автомобиля на указанные даты. Возможность изменения данных о пробеге для выбранного автомобиля.</p>
			<figure class="pic_w_caption">
				<img src="images/2.9_assigment7_bgless.png">
				<figcaption>Рисунок 5.6 – Структура базы данных «Прокат машин»</figcaption>
			</figure>
			<br>
			<p><b>Вариант 7.</b> Создать и заполнить произвольными данными БД для хранения информации о результатах футбольного чемпионата (Рисунок 5.7).</p>
			<p>Для каждой футбольной команды задается такая информация: название, лига, главный тренер. Для каждой игры задается дата проведения, команды участницы, место проведения, финальный счет, участвующие футболисты.</p>
			<p>Сформировать запросы и вывести результаты:</p>
			<ul>
				<li>таблица чемпионата выбранной лиги;</li>
				<li>список игр на указанный временной интервал;</li>
				<li>список игр выбранного футболиста.</li>
			</ul>
			<figure class="pic_w_caption">
				<img src="images/2.10_assigment8_bgless.png">
				<figcaption>Рисунок 5.7 – Структура базы данных «Футбольный чемпионат»</figcaption>
			</figure>
			<br>
			<p><b>Вариант 8.</b> Создать и заполнить произвольными данными БД для хранения информации об использовании сетевого трафика (Рисунок 5.8).</p>
			<p>Для каждого клиента задается логин, пароль, статический IP-адрес машины клиента, баланс счета. Для сеансов работы задается время начала и окончания сеанса работы, количество входящего трафика, количество исходящего трафика.</p>
			<p>Сформировать запросы и вывести результаты:</p>
			<ul>
				<li>статистику работы в сети выбранного клиента;</li>
				<li>статистику работы в сети за указанный промежуток времени;</li>
				<li>вывести список клиентов с отрицательным балансом счета.</li>
			</ul>
			<figure class="pic_w_caption">
				<img src="images/2.11_assigment9_bgless.png">
				<figcaption>Рисунок 5.8 – Структура базы данных «Сетевой трафик»</figcaption>
			</figure>
			<br>
			<p><b>Вариант 9.</b> Создать и заполнить произвольными данными БД для хранения информации о компьютерах организации (Рисунок 5.9).</p>
			<p>Для каждого компьютера задается сетевое имя, тип центрального процессора, тип материнской платы, объем ОЗУ и НЖМД, тип монитора, установленное программное обеспечение, фирма-продавец, дата покупки, срок гарантии.</p>
			<p>Сформировать запросы и вывести результаты:</p>
			<ul>
				<li>список компьютеров с заданным типом центрального процессора;</li>
				<li>список компьютеров с установленным ПО (название ПО выбирается из перечня);</li>
				<li>список компьютеров с истекшим гарантийным сроком.</li>
			</ul>
			<figure class="pic_w_caption">
				<img src="images/2.12_assigment10_bgless.png">
				<figcaption>Рисунок 5.9 – Структура базы данных «Компьютеры организации»</figcaption>
			</figure>
		</div>
		
		<div class="chapter" id="lab_report">
			<span class="chapter_name">6. Содержание отчета</span>
			<ul>
				<li>титульный лист с указанием темы лабораторной, фамилии, инициалов и группы выполнивших студентов (до 3-х человек);</li> 
				<li>цель работы;</li> 
				<li>вариант задания;</li>
				<li>используемые команды консоли MongoDB для создания и заполнения БД;</li>
				<li>исходные коды РНР и JavaScript скриптов;</li>
				<li>результаты выполнения запросов в виде снимков экрана браузера;</li>
				<li>выводы по работе.</li>
			</ul>
			<p>Допускается сдача отчета в электронном виде. Для защиты наличие распечатанного отчета не является необходимым. При выкладывании на GitHub не забывайте про содержимое БД, используемое вашим кодом.</p>
		</div>
		
		<div class="chapter" id="lab_questions">
			<span class="chapter_name">7. Контрольные вопросы</span>
			<ol>
				<li>Какие NoSQL СУБД вам известны?</li>
				<li>Какие возможности языка PHP для работы с NoSQL СУБД MongoDB вам известны?</li>
				<li>Каким образом осуществляется управление подключениями к базам данных?</li>
				<li>В чем разница между методами find и findOne?</li>
				<li>Операторы для фильтрации выборки и их использование.</li>
				<li>Как ограничить выборку заданным числом документов?</li>
				<li>Как отсортировать документы в выборке по возрастанию значения определенного поля?</li>
				<li>Как убрать отображение ненужных (в этом запросе) полей документа?</li>
				<li>Как добавить множество документов в коллекцию?</li>
				<li>Для чего используется объект MongoDB\UpdateResult?</li>
				<li>Возможно ли отсутствие модифицированных документов при успешном выполнении метода updateOne и getMatchedCount больше 0?</li>
				<li>В чем заключается операция Upsert?</li>
				<li>Как удалить документы коллекции?</li>
				<li>Преимущества и недостатки использования WebStorage?</li>
				<li>В чем разница между localStorage и sessionStorage?</li>
				<li>Как созранить данные в хранилище WebStorage?</li>
				<li>Можно ли сохранять в хранилище не-строковые данные?</li>
				<li>Для чего используются методы JSON.stringify и JSON.parse?</li>
				<li>В каких случаях возникает событие storage?</li>
				<li>Что происходит при переполнении хранилища?</li>				
			</ol>
			<p>Знание ответов на приведенные вопросы является необходимым, но не достаточным условием для получения высокой оценки за защиту лабораторной работы. Помните про темы, рассмотренные на лекциях!</p>
		</div>
		
		<div class="chapter" id="lab_literature">
			<span class="chapter_name">СПИСОК ЛИТЕРАТУРЫ</span>
			<ol>  
				<li><a href="http://coldfox.ru/article/5be022d49227d914a1c83fe3/Подробное-руководство-по-MongoDB-Mongoose" target="_blank">Подробное руководство по MongoDB</a></li>
				<li><a href="https://habr.com/ru/post/144798/" target="_blank">Моделирование данных в MongoDB</a></li>
				<li><a href="https://metanit.com/nosql/mongodb/" target="_blank">Онлайн-руководство по MongoDB</a></li>
				<li><a href="https://dzone.com/articles/top-10-most-common-commands-for-beginners" target="_blank">Commands for MongoDB Beginners</a></li>
				<li><a href="http://gearmobile.github.io/tags/#mongodb" target="_blank">Цикл статей о работе с Монго</a></li>
				<li><a href="https://getcomposer.org/" target="_blank">Dependency Manager for PHP</a></li>
				<li><a href="https://docs.mongodb.com/php-library/v1.5/tutorial/install-php-library/" target="_blank">MongoDB PHP Library</a></li>
				<li><a href="https://docs.mongodb.com/manual/crud/" target="_blank">MongoDB CRUD Operations</a></li>
				<li><a href="https://www.php.net/manual/ru/mongodb.tutorial.library.php" target="_blank">Использование библиотеки PHP для MongoDB</a></li>
				<li><a href="https://learn.javascript.ru/localstorage" target="_blank">LocalStorage, sessionStorage</a></li>
				<li><a href="https://html5css.ru/html/html5_webstorage.php" target="_blank">HTML5 Веб-хранилище</a></li>
				<li><a href="https://developer.mozilla.org/ru/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API" target="_blank">Использование WebStorage API</a></li>
			</ol>
		</div>
		<br><a href="#start">Вернуться к началу</a>
		<br><a href="..\..\index.html">Вернуться на стартовую страницу ресурса</a>
		<!-- Удачной отработки! --> 
	</div>
</body>
</html>