<!DOCTYPE HTML>
<html>
<head>
	<title>MongoDB</title>
	<meta charset="utf-8">
	<meta name="description " content="Версия 2020.04.15. Методические указания для выполнения лабораторной работы по курсу ИТех2 для потока КИ.">
	<link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body>
	<div class="container">
		<div id="chapters">
			<h1 id="start">Нереляционная СУБД MongoDB и хранение данных на стороне клиента</h1>
			<ul>
				<li><a href="#lab_goal">Цель работы</a></li>
				<li><a href="#lab_manual">Методические указания</a></li>
				<li><a href="#lab_software">Описание лабораторной установки</a></li>
				<li><a href="#lab_execution">Порядок выполнения работы</a></li>
				<li><a href="#lab_variants">Варианты заданий</a></li>
				<li><a href="#lab_report">Содержание отчета</a></li>
				<li><a href="#lab_questions">Контрольные вопросы</a></li>
				<li><a href="#lab_literature">Дополнительные источники</a></li>
			</ul>
		</div>
			
		<div class="chapter" id="lab_goal">
			<span class="chapter_name">1. Цель работы</span>
			<p>Изучение методов для работы с нереляционной СУБД MongoDB в языке PHP.</p>
			<p>Знакомство с хранением данных на стороне клиента, используя WebStorage.</p>
		</div>
		
		<div class="chapter" id="lab_manual">
			<span class="chapter_name">2. Методические указания</span>
			<p>При подготовке к выполнению лабораторной работы следует ознакомиться с возможностями нереляционной СУБД MongoDB и особенностями ее использования в языке PHP с помощью MongoDB PHP Library и классов MongoDB\Driver\Manager, MongoDB\Client, MongoDB\Collection.</p>
			<p>Кроме того, требуется ознакомиться с JavaScript-методами setItem и getItem для работы с веб-хранилищами localStorage, для обеспечения записи и получения данных на стороне клиента.</p>
		</div>
		
		<div class="chapter" id="lab_software">
			<span class="chapter_name">3. Описание лабораторной установки</span>
			<p>Для выполнения лабораторной работы рекомендуется использовать:</p>
			<ul>
				<li>текстовый редактор, имеющий подсветку синтаксиса: Notepad++ или Visual Studio Code;</li>
				<li>браузер: Mozilla Firefox или Google Chrome;</li>
				<li>СУБД: MongoDB 3.6.0;</li>
				<li>PHP 7.3 и менеджер пакетов Composer;</li>
				<li>сборка веб-сервера: XAMPP или OpenServer (в составе OpenServer уже может быть установлена MongoDB).</li>
			</ul>
			<p>Рекомендуемые средства являются свободным программным обеспечением.</p>
			<p>Для выполнения лабораторной работы не требуется доступ к сети Интернет.</p>
		</div>
		
		<div class="chapter" id="lab_execution">
			<span class="chapter_name">4. Порядок выполнения работы</span>
			<ol>
				<li>Запустить сервер MongoDB, приложение mongod, которое находится в папке bin. Вероятно, полный путь будет <span class = "code_snippet">C:\Program Files\MongoDB\Server\3.6\bin\mongod.exe</span>. Убедиться, что сервер готов к подключениям (в конце вывода консоли должна быть строка <span class = "code_snippet">waiting for connections on port 27017</span>). Не закрывать сервер до завершения работы.</li>
				<li>Запустить консольную оболочку MongoDB, приложение mongo.exe, которое находится в папке bin установленной СУБД MongoDB. Проверить имеющиеся базы данных (команда <span class = "code_snippet">show dbs</span>), создать БД для выполнения лабораторной работы (<span class = "code_snippet">use dbforlab</span>), создать коллекцию (или коллекции), используя явную команду <span class = "code_snippet">db.createCollection('somecollection')</span> или создавая коллекцию неявно, при последующем добавлении документов. Заполнить коллекцию документами, соответствующими заданию, используя команды save, insert или load. Проверить заполнение БД, используя команду find.
				</li>
				<li>Проверить выполнение в консоли запросов на выборку согласно варианту. Использовать средства для ограничения выборки документов и управления отображением (отключение вывода ненужных полей, модификатор pretty и т.д.).</li>
				<li>Используя консоль языка PHP, перейти в каталог проекта и выполнить команду <span class = "code_snippet">composer require mongodb/mongodb</span>, что приведет (при наличии установленного менеджера пакетов Composer) к появлению в каталоге проекта папки vendor с файлами библиотеки для работы с MongoDB. Для использования установленной библиотеки в php-файлах проекта потребуется добавить ее подключение <span class = "code_snippet">require_once __DIR__ . "/vendor/autoload.php";</span></li>
				<li>Создать веб-приложение, запрашивающее у пользователя параметры для запросов и выводящее их результаты. Возможно повторное использование кода элементов страницы из лабораторной работы по PDO. Используются только запросы на выборку.</li>
				<li>Реализовать работу с данными на стороне клиента. После указания пользователем параметра запроса (выборе элемента выпадающего списка, вводе значения текстового поля и т.д.) у него должна быть возможность посмотреть ранее сохраненные результаты для аналогичного запроса. Для этого на страницу следует добавить элементы для вывода ранее сохраненных в localStorage данных (если они есть, или сообщение про их отсутствие).<!-- Т.е. кнопка, по нажатию на которую будет в определенное место текущей веб-страницы выводиться содержимое localStorage для аналогичного запроса с именно такими параметрами, если он уже выполнялся в прошлом. Независимо от того, есть ли ранее сохраненные результаты, пользователь может все так же отправить запрос на сервер, и получить результат. Результаты запросов, с учетом параметров, должны быть сохранены в локальном хранилище. --></li>
			</ol>
			<div class="variants">Задания для лабораторной являются индивидуальными. Возможно совместное выполнение в бригаде вариантов <b>всех</b> ее участников. Номер варианта студента рассчитывается через остаток от деления его номера в журнале академгруппы на количество доступных вариантов. В данной лабораторной работе, номер своего варианта можно узнать как N%10, где N &dash; номер в журнале академической группы, или воспользоваться табличкой (<input type="checkbox" class="view-variants"> показать).
				<table>
					<tr>
						<th>Номер по журналу</th>
						<th>Вариант задания</th>
						<th rowspan="16">&nbsp;</th>
						<th>Номер по журналу</th>
						<th>Вариант задания</th>
					</tr>
					<tr>
						<td>1</td>
						<td>1</td>
						<td>16</td>
						<td>6</td>
					</tr>
					<tr>
						<td>2</td>
						<td>2</td>
						<td>17</td>
						<td>7</td>
					</tr>
					<tr>
						<td>3</td>
						<td>3</td>
						<td>18</td>
						<td>8</td>
					</tr>
					<tr>
						<td>4</td>
						<td>4</td>
						<td>19</td>
						<td>9</td>
					</tr>
					<tr>
						<td>5</td>
						<td>5</td>
						<td>20</td>
						<td>0</td>
					</tr>
					<tr>
						<td>6</td>
						<td>6</td>
						<td>21</td>
						<td>1</td>
					</tr>
					<tr>
						<td>7</td>
						<td>7</td>
						<td>22</td>
						<td>2</td>
					</tr>
					<tr>
						<td>8</td>
						<td>8</td>
						<td>23</td>
						<td>3</td>
					</tr>
					<tr>
						<td>9</td>
						<td>9</td>
						<td>24</td>
						<td>4</td>
					</tr>
					<tr>
						<td>10</td>
						<td>0</td>
						<td>25</td>
						<td>5</td>
					</tr>
					<tr>
						<td>11</td>
						<td>1</td>
						<td>26</td>
						<td>6</td>
					</tr>
					<tr>
						<td>12</td>
						<td>2</td>
						<td>27</td>
						<td>7</td>
					</tr>
					<tr>
						<td>13</td>
						<td>3</td>
						<td>28</td>
						<td>8</td>
					</tr>
					<tr>
						<td>14</td>
						<td>4</td>
						<td>29</td>
						<td>9</td>
					</tr>
					<tr>
						<td>15</td>
						<td>5</td>
						<td>30</td>
						<td>0</td>
					</tr>
				</table>
			</div>
			<div>Отработка выставляется после совместной со студентом проверки работы проекта, ответов на вопросы по коду и получения преподавателем ссылки репозитория проекта на GitHub, выполненного в соответствии со всеми заданиями этого раздела.</div>
			<!-- <p>Результат работы демонстрируется в электронном виде.</p> -->
		</div>

		<div class="chapter" id="lab_variants">
			<span class="chapter_name">5. Варианты заданий</span>
			<br>
			<p><b>Вариант 0.</b> Создать и заполнить БД для хранения информации о литературных ресурсах библиотеки (книгах, газетах, журналах и т.д.). Для описания множества литературных ресурсов достаточно использовать одну коллекцию. Каждый ресурс, представленный в виде документа в составе коллекции, характеризуется набором свойств (и каждый, возможно, своим собственным, особым набором). Например, книги могут характеризоваться названием, уникальным номером (ISBN), издательством, годом издания, количеством страниц, автором (авторов может быть больше одного). У каких-то книг какого-то из перечисленных для примера свойств может и не быть, или быть какое-то новое свойство (например, наличие в комплекте диска). Журналы характеризуются обычно названием, годом выпуска, номером. Помните, что нет жесткого ограничения на одинаковый набор полей для разных ресурсов, пользуйтесь преимуществами MongoDB. Запросы на выборку предполагают, что требуемые поля будут у какой-то части документов в коллекции - но совсем не обязательно, что у всех.</p>
			<p>Предоставить пользователю возможность получения информации о:</p>
			<ul>
				<li>литературе указанного издательства;</li>
				<li>литературе, опубликованной за указанный временной период (учитывать год издания);</li>
				<li>литературе указанного автора.</li>
			</ul>
			<br>
			<p><b>Вариант 1.</b> Создать и заполнить БД для хранения информации о расписании занятий (достаточно одной коллекции). Каждое занятие описывается датой проведения, временем (указывается номер пары), аудиторией, дисциплиной, типом (лекция, лабораторная, зачет и т.д.), группой (групп может быть больше одной - например, для лекций это нормальное явление), преподавателем (он также может быть указан не один).</p>
			<p>Предоставить пользователю возможность получения информации о расписании занятий для:</p>
			<ul>
				<li>лабораторных работ выбранной из списка группы;</li>
				<li>лекций указанного преподавателя по указанной дисциплине;</li>
				<li>аудитории.</li>
				<!-- <li>свободной аудитории на заданную дату и пару.</li> -->
			</ul>
			<br>
			<p><b>Вариант 2.</b> Создать и заполнить БД для хранения информации о работе над задачами. Каждая задача относится к какому-то проекту, и описывается названием, кратким описанием, работником, выполнявшим проект (может быть больше одного), руководителем, ответственным за проект на момент выполнения этой задачи, временем начала и временем завершения работы. Для хранения даты и времени в БД рекомендуется использовать формат Unix Timestamp.</p>
			<p>Предоставить пользователю возможность получения информации о:</p>
			<ul>
				<li>выполненных задачах по выбранному проекту на указанную дату;</li>
				<li>количестве проектов указанного руководителя;</li>
				<li>сотрудниках, работавших под началом выбранного руководителя.</li>
			</ul>
			<br>
			<p><b>Вариант 3.</b> Создать и заполнить БД для хранения информации о дежурствах в поликлинике. Дежурство описывается сменой (первая, вторая, третья<!-- и не только -->), датой, задействованными медсестрами (не менее одной), названием отделения, номерами используемых на этом дежурстве палат.</p>
			<p>Предоставить пользователю возможность получения следующей информации:</p>
			<ul>
				<li>перечень палат, в которых дежурит выбранная медсестра;</li><!-- в указанную дату -->
				<li>медсестры, дежурившие в указанном отделении;</li>
				<li>всех дежурствах (в любых палатах) в указанную смену в указанном отделении.</li>
			</ul>
			<br>
			<p><b>Вариант 4.</b> Создать и заполнить БД домашней фильмотеки, содержащей информацию про имеющиеся фильмы, сериалы, мультсериалы и т.д. Объекты фильмотеки описываются названием, годом выхода, типом носителя (видеокассета, CD, DVD, BR) и произвольным набором параметров, среди которых режиссер, актеры (может быть больше одного), жанр (может быть больше одного), страна выпуска и т.д.</p>
			<p>Предоставить пользователю возможность получения следующей информации:</p>
			<ul>
				<li>что можно посмотреть на видеокассетах;</li>
				<li>в каких фильмах участвовал выбранный актер;</li>
				<li>что посмотреть из нового (вышедшее в этом году).</li>
			</ul>
			<br>
			<p><b>Вариант 5.</b> Создать и заполнить БД товаров интернет–магазина (в одной коллекции). Для товара обязательно указывается название, цена товара, количество единиц на складе. Возможные поля - фирма-производитель, категория товара (процессоры, материнские платы и т.д.), отзывы (могут быть и более одного), состояние (новое или б/у) и т.д.</p>
			<p>Предоставить пользователю возможность получения следующей информации:</p>
			<ul>
				<li>перечень производителей, с которыми работает магазин;</li>
				<li>товары, отсутствующие на складе (т.е. вообще они есть, но сейчас количество 0);</li>
				<li>товары в выбранном ценовом диапазоне.</li>
			</ul>
			<br>
			<p><b>Вариант 6.</b> Создать и заполнить БД пункта проката автомобилей. В базе представлены две коллекции - коллекция документов, описывающая аренду (дата начала и завершения, стоимость аренды и марка машины), и коллекция, содержащая документы, которые описывают имеющиеся в пункте проката автомобили (марка, год выпуска, пробег, состояние (возможное поле)). Для хранения даты и времени в БД рекомендуется использовать формат Unix Timestamp.</p>
			<p>Предоставить пользователю возможность получения следующей информации:</p>
			<ul>
				<li>полученный доход с проката по состоянию на выбранную дату;</li>
				<li>автомобили с пробегом меньше указанного;</li>
				<li>имеющиеся в данном пункте марки автомобилей.</li>
			</ul>
			<br>
			<p><b>Вариант 7.</b> Создать и заполнить БД футбольного чемпионата. В базе представлены две коллекции - коллекция документов, описывающая команды (название, тренер, состав команды (массив футболистов)), и коллекция, содержащая документы, которые описывают игры чемпионата (лига, дата и место проведения, команды-участницы игры, победитель и т.д.).</p>
			<p>Предоставить пользователю возможность получения следующей информации:</p>
			<ul>
				<li>таблица чемпионата для выбранной лиги;</li>
				<li>список футболистов указанной команды;</li>
				<li>список игр, в которых участвовала выбранная команда.</li>
			</ul>
			<br>
			<p><b>Вариант 8.</b> Создать и заполнить БД для хранения информации об использовании сетевого трафика. В базе представлены две коллекции - коллекция документов, описывающая пользователей (логин, пароль, статический IP-адрес клиента, баланс счета, сообщения), и коллекция, содержащая документы, которые описывают сеансы выхода в Сеть: время начала и окончания сеанса работы, количество входящего трафика, количество исходящего трафика, IP-адрес клиента, стоимость сеанса.</p>
			<p>Предоставить пользователю возможность получения следующей информации:</p>
			<ul>
				<li>сообщения от выбранного клиента;</li>
				<li>общий входящий и исходящий трафик;</li>
				<li>вывести список клиентов с отрицательным балансом счета.</li>
			</ul>
			<br>
			<p><b>Вариант 9.</b> Создать и заполнить БД для хранения информации о компьютерах организации. В БД представлена одна коллекция, документы которой описывают компьютеры организации - инвентарный номер, год приобретения, срок гарантии, процессор, память, объем диска, установленное лицензионное ПО и т.д.</p>
			<p>Предоставить пользователю возможность получения следующей информации:</p>
			<ul>
				<li>список компьютеров с заданным типом центрального процессора;</li>
				<li>список компьютеров с установленным ПО (название ПО выбирается из перечня);</li>
				<li>список компьютеров с истекшим гарантийным сроком.</li>
			</ul>
		</div>
		
		<div class="chapter" id="lab_report">
			<span class="chapter_name">6. Содержание отчета</span>
			<ul>
				<li>титульный лист с указанием темы лабораторной, фамилии, инициалов и группы выполнивших студентов (до 3-х человек);</li> 
				<li>цель работы;</li> 
				<li>вариант задания;</li>
				<li>используемые команды консоли MongoDB для создания и заполнения БД;</li>
				<li>исходные коды РНР и JavaScript скриптов;</li>
				<li>результаты выполнения запросов в виде снимков экрана браузера;</li>
				<li>выводы по работе.</li>
			</ul>
			<p>Допускается сдача отчета в электронном виде. Для защиты наличие распечатанного отчета не является необходимым. При выкладывании на GitHub не забывайте про содержимое БД, используемое вашим кодом.</p>
		</div>
		
		<div class="chapter" id="lab_questions">
			<span class="chapter_name">7. Контрольные вопросы</span>
			<ol>
				<li>Какие NoSQL СУБД вам известны?</li>
				<li>Как, используя консоль MongoDB, создать и заполнить новую БД? Как выполнить поиск и изменение записей?</li>
				<li>Какие возможности языка PHP для работы с NoSQL СУБД MongoDB вам известны?</li>
				<li>Каким образом осуществляется управление подключениями к базам данных?</li>
				<li>В чем разница между методами find и findOne?</li>
				<li>Операторы для фильтрации выборки и их использование.</li>
				<li>Как ограничить выборку заданным числом документов?</li>
				<li>Как отсортировать документы в выборке по возрастанию значения определенного поля?</li>
				<li>Как убрать отображение ненужных (в этом запросе) полей документа?</li>
				<li>Как добавить множество документов в коллекцию?</li>
				<li>Для чего используется объект MongoDB\UpdateResult?</li>
				<li>Возможно ли отсутствие модифицированных документов при успешном выполнении метода updateOne и getMatchedCount больше 0?</li>
				<li>В чем заключается операция Upsert?</li>
				<li>Как удалить документы коллекции?</li>
				<li>Преимущества и недостатки использования WebStorage?</li>
				<li>В чем разница между localStorage и sessionStorage?</li>
				<li>Как сохранить данные в хранилище WebStorage?</li>
				<li>Можно ли сохранять в хранилище не-строковые данные?</li>
				<li>Для чего используются методы JSON.stringify и JSON.parse?</li>
				<li>В каких случаях возникает событие storage?</li>
				<li>Что происходит при переполнении хранилища?</li>				
			</ol>
			<p>Знание ответов на приведенные вопросы является необходимым, но не достаточным условием для получения высокой оценки за защиту лабораторной работы. Помните про темы, рассмотренные на лекциях!</p>
		</div>
		
		<div class="chapter" id="lab_literature">
			<span class="chapter_name">СПИСОК ЛИТЕРАТУРЫ</span>
			<ol>  
				<li><a href="http://coldfox.ru/article/5be022d49227d914a1c83fe3/Подробное-руководство-по-MongoDB-Mongoose" target="_blank">Подробное руководство по MongoDB</a></li>
				<li><a href="https://habr.com/ru/post/144798/" target="_blank">Моделирование данных в MongoDB</a></li>
				<li><a href="https://metanit.com/nosql/mongodb/" target="_blank">Онлайн-руководство по MongoDB</a></li>
				<li><a href="https://dzone.com/articles/top-10-most-common-commands-for-beginners" target="_blank">Commands for MongoDB Beginners</a></li>
				<li><a href="http://gearmobile.github.io/tags/#mongodb" target="_blank">Цикл статей о работе с Монго</a></li>
				<li><a href="https://getcomposer.org/" target="_blank">Dependency Manager for PHP</a></li>
				<li><a href="https://docs.mongodb.com/php-library/v1.5/tutorial/install-php-library/" target="_blank">MongoDB PHP Library</a></li>
				<li><a href="https://docs.mongodb.com/manual/crud/" target="_blank">MongoDB CRUD Operations</a></li>
				<li><a href="https://www.php.net/manual/ru/mongodb.tutorial.library.php" target="_blank">Использование библиотеки PHP для MongoDB</a></li>
				<li><a href="https://learn.javascript.ru/localstorage" target="_blank">LocalStorage, sessionStorage</a></li>
				<li><a href="https://html5css.ru/html/html5_webstorage.php" target="_blank">HTML5 Веб-хранилище</a></li>
				<li><a href="https://developer.mozilla.org/ru/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API" target="_blank">Использование WebStorage API</a></li>
			</ol>
		</div>
		<br><a href="#start">Вернуться к началу</a>
		<br><a href="..\..\index.html">Вернуться на стартовую страницу ресурса</a>
		<!-- Удачной отработки! --> 
	</div>
</body>
</html>