<!DOCTYPE HTML>
<html>
<head>
	<title>MongoDB</title>
	<meta charset="utf-8">
	<meta name="description " content="Версія 2020.04.15. Методичні вказівки для виконання лабораторної роботи з курсу ІТех2 для потоку КІ.">
	<link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body>
	<div class="container">
		<div id="chapters">
			<h1 id="start">Нереляційна СУБД MongoDB і зберігання даних на стороні клієнта</h1>
			<ul>
				<li><a href="#lab_goal">Мета роботи</a></li>
				<li><a href="#lab_manual">Методичні вказівки</a></li>
				<li><a href="#lab_software">Опис лабораторної установки</a></li>
				<li><a href="#lab_execution">Порядок виконання роботи</a></li>
				<li><a href="#lab_variants">Варіанти завдань</a></li>
				<li><a href="#lab_report">Зміст звіту</a></li>
				<li><a href="#lab_questions">Контрольні питання</a></li>
				<li><a href="#lab_literature">Додаткові джерела</a></li>
			</ul>
		</div>
			
		<div class="chapter" id="lab_goal">
			<span class="chapter_name">1. Мета роботи</span>
			<p>Вивчення методів для роботи з нереляційною СУБД MongoDB у мові PHP.</p>
			<p>Знайомство зі зберіганням даних на стороні клієнта, використовуючи WebStorage.</p>
		</div>
		
		<div class="chapter" id="lab_manual">
			<span class="chapter_name">2. Методичні вказівки</span>
			<p>Під час підготовки до виконання лабораторної роботи слід ознайомитися з можливостями нереляційної СУБД MongoDB та особливостями її використання в мові PHP за допомогою MongoDB PHP Library і класів MongoDB\Driver\Manager, MongoDB\Client, MongoDB\Collection.</p>
			<p>Крім того, потрібно ознайомитися з JavaScript-методами setItem і getItem для роботи з веб-сховищами localStorage, для забезпечення запису та отримання даних на стороні клієнта.</p>
		</div>
		
		<div class="chapter" id="lab_software">
			<span class="chapter_name">3. Опис лабораторної установки</span>
			<p>Для виконання лабораторної роботи рекомендується використовувати:</p>
			<ul>
				<li>текстовий редактор, що має підсвічування синтаксису: Notepad++ чи Visual Studio Code;</li>
				<li>браузер: Mozilla Firefox чи Google Chrome;</li>
				<li>СУБД: MongoDB 3.6.0;</li>
				<li>PHP 7.3 і менеджер пакетів Composer;</li>
				<li>збірка веб-сервера: XAMPP чи OpenServer (у складі OpenServer уже може бути встановлено MongoDB).</li>
			</ul>
			<p>Рекомендовані засоби є вільним програмним забезпеченням.</p>
			<p>Для виконання лабораторної роботи не потрібен доступ до мережі Інтернет.</p>
		</div>
		
		<div class="chapter" id="lab_execution">
			<span class="chapter_name">4. Порядок виконання роботи</span>
			<ol>
				<li>Запустити сервер MongoDB, додаток mongod, яке знаходиться в папці bin. Ймовірно, повний шлях буде <span class = "code_snippet">C:\Program Files\MongoDB\Server\3.6\bin\mongod.exe</span>. Переконатися, що сервер готовий до підключень (наприкінці виведення консолі має бути рядок <span class = "code_snippet">waiting for connections on port 27017</span>). Не закривати сервер до завершення роботи.</li>
				<li>Запустити консольну оболонку MongoDB, додаток mongo.exe, яке знаходиться в папці bin встановленої СУБД MongoDB. Перевірити наявні бази даних (команда <span class = "code_snippet">show dbs</span>), створити БД для виконання лабораторної роботи (<span class = "code_snippet">use dbforlab</span>), створити колекцію (або колекції), використовуючи явну команду <span class = "code_snippet">db.createCollection('somecollection')</span> або створюючи колекцію неявно, під час подальшого додавання документів. Заповнити колекцію документами, що відповідають завданню, використовуючи команди save, insert або load. Перевірити заповнення БД, використовуючи команду find.
				</li>
				<li>Проверить выполнение в консоли запросов на выборку согласно варианту. Использовать средства для ограничения выборки документов и управления отображением (отключение вывода ненужных полей, модификатор pretty и т.д.).</li>
				<li>Використовуючи консоль мови PHP, перейти до каталогу проекту та виконати команду <span class = "code_snippet">composer require mongodb/mongodb</span>, що призведе (за наявності встановленого менеджера пакетів Composer) до появи в каталозі проєкту папки vendor з файлами бібліотеки для роботи з MongoDB. Для використання встановленої бібліотеки в php-файлах проєкту потрібно додати її підключення <span class = "code_snippet">require_once __DIR__ . "/vendor/autoload.php";</span></li>
				<li>Створити веб-додаток, що запитує у користувача параметри для запитів і виводить їхні результати. Можливе повторне використання коду елементів сторінки з лабораторної роботи з PDO. Використовуються тільки запити на вибірку.</li>
				<li>Реалізувати роботу з даними на стороні клієнта. Після вказівки користувачем параметра запиту (виборі елемента списку, що випадає, введенні значення текстового поля і т.д.) у нього має бути можливість подивитися раніше збережені результати для аналогічного запиту. Для цього на сторінку слід додати елементи для виведення раніше збережених у localStorage даних (якщо вони є, або повідомлення про їхню відсутність).<!-- кнопка, після натискання на яку буде в певне місце поточної веб-сторінки виводитися вміст localStorage для аналогічного запиту з саме такими параметрами, якщо він уже виконувався в минулому.Незалежно від того, чи є раніше збережені результати, користувач може так само відправити запит на сервер, і отримати результат. Результати запитів, з урахуванням параметрів, мають бути збережені у локальному сховищі. --></li>
			</ol>
			<div class="variants">Завдання для лабораторної є індивідуальними. Можливе спільне виконання в бригаді варіантів <b>усіх</b> її учасників. Номер варіанта студента розраховується через залишок від ділення його номера в журналі академгрупи на кількість доступних варіантів. У даній лабораторній роботі, номер свого варіанту можна дізнатися як N%10, де N &dash; номер у журналі академічної групи, або скористатися табличкою (<input type="checkbox" class="view-variants"> показати).
				<table>
					<tr>
						<th>Номер за журналом</th>
						<th>Варіант завдання</th>
						<th rowspan="16">&nbsp;</th>
						<th>Номер за журнало</th>
						<th>Варіант завдання</th>
					</tr>
					<tr>
						<td>1</td>
						<td>1</td>
						<td>16</td>
						<td>6</td>
					</tr>
					<tr>
						<td>2</td>
						<td>2</td>
						<td>17</td>
						<td>7</td>
					</tr>
					<tr>
						<td>3</td>
						<td>3</td>
						<td>18</td>
						<td>8</td>
					</tr>
					<tr>
						<td>4</td>
						<td>4</td>
						<td>19</td>
						<td>9</td>
					</tr>
					<tr>
						<td>5</td>
						<td>5</td>
						<td>20</td>
						<td>0</td>
					</tr>
					<tr>
						<td>6</td>
						<td>6</td>
						<td>21</td>
						<td>1</td>
					</tr>
					<tr>
						<td>7</td>
						<td>7</td>
						<td>22</td>
						<td>2</td>
					</tr>
					<tr>
						<td>8</td>
						<td>8</td>
						<td>23</td>
						<td>3</td>
					</tr>
					<tr>
						<td>9</td>
						<td>9</td>
						<td>24</td>
						<td>4</td>
					</tr>
					<tr>
						<td>10</td>
						<td>0</td>
						<td>25</td>
						<td>5</td>
					</tr>
					<tr>
						<td>11</td>
						<td>1</td>
						<td>26</td>
						<td>6</td>
					</tr>
					<tr>
						<td>12</td>
						<td>2</td>
						<td>27</td>
						<td>7</td>
					</tr>
					<tr>
						<td>13</td>
						<td>3</td>
						<td>28</td>
						<td>8</td>
					</tr>
					<tr>
						<td>14</td>
						<td>4</td>
						<td>29</td>
						<td>9</td>
					</tr>
					<tr>
						<td>15</td>
						<td>5</td>
						<td>30</td>
						<td>0</td>
					</tr>
				</table>
			</div>
			<div>Відпрацювання виставляється після спільної зі студентом перевірки роботи проєкту, відповідей на запитання щодо коду та отримання викладачем посилання на репозиторій проєкту на GitHub, виконаного відповідно до всіх завдань цього розділу..</div>
			<!-- <p>Результат роботи демонструється в електронному вигляді.</p> -->
		</div>

		<div class="chapter" id="lab_variants">
			<span class="chapter_name">5. Варіанти завдань</span>
			<br>
			<p><b>Варіанти 0.</b> Створити та заповнити БД для зберігання інформації про літературні ресурси бібліотеки (книжках, газетах, журналах тощо). Для опису безлічі літературних ресурсів достатньо використовувати одну колекцію. Кожен ресурс, представлений у вигляді документа у складі колекції, характеризується набором властивостей (і кожен, можливо, своїм власним, особливим набором). Наприклад, книги можуть характеризуватися назвою, унікальним номером (ISBN), видавництвом, роком видання, кількістю сторінок, автором (авторів може бути більше одного). У якихось книг якоїсь із перелічених для прикладу властивостей може і не бути, або бути якась нова властивість (наприклад, наявність у комплекті диска). Журнали характеризуються зазвичай назвою, роком випуску, номером. Пам'ятайте, що немає жорсткого обмеження на однаковий набір полів для різних ресурсів, користуйтеся перевагами MongoDB. Запити на вибірку припускають, що необхідні поля будуть у якоїсь частини документів у колекції - але зовсім не обов'язково, що у всіх.</p>
			<p>Предоставить пользователю возможность получения информации о:</p>
			<ul>
				<li>литературе указанного издательства;</li>
				<li>литературе, опубликованной за указанный временной период (учитывать год издания);</li>
				<li>литературе указанного автора.</li>
			</ul>
			<br>
			<p><b>Вариант 1.</b> Создать и заполнить БД для хранения информации о расписании занятий (достаточно одной коллекции). Каждое занятие описывается датой проведения, временем (указывается номер пары), аудиторией, дисциплиной, типом (лекция, лабораторная, зачет и т.д.), группой (групп может быть больше одной - например, для лекций это нормальное явление), преподавателем (он также может быть указан не один).</p>
			<p>Предоставить пользователю возможность получения информации о расписании занятий для:</p>
			<ul>
				<li>лабораторных работ выбранной из списка группы;</li>
				<li>лекций указанного преподавателя по указанной дисциплине;</li>
				<li>аудитории.</li>
				<!-- <li>свободной аудитории на заданную дату и пару.</li> -->
			</ul>
			<br>
			<p><b>Вариант 2.</b> Создать и заполнить БД для хранения информации о работе над задачами. Каждая задача относится к какому-то проекту, и описывается названием, кратким описанием, работником, выполнявшим проект (может быть больше одного), руководителем, ответственным за проект на момент выполнения этой задачи, временем начала и временем завершения работы. Для хранения даты и времени в БД рекомендуется использовать формат Unix Timestamp.</p>
			<p>Предоставить пользователю возможность получения информации о:</p>
			<ul>
				<li>выполненных задачах по выбранному проекту на указанную дату;</li>
				<li>количестве проектов указанного руководителя;</li>
				<li>сотрудниках, работавших под началом выбранного руководителя.</li>
			</ul>
			<br>
			<p><b>Вариант 3.</b> Создать и заполнить БД для хранения информации о дежурствах в поликлинике. Дежурство описывается сменой (первая, вторая, третья<!-- и не только -->), датой, задействованными медсестрами (не менее одной), названием отделения, номерами используемых на этом дежурстве палат.</p>
			<p>Предоставить пользователю возможность получения следующей информации:</p>
			<ul>
				<li>перечень палат, в которых дежурит выбранная медсестра;</li><!-- в указанную дату -->
				<li>медсестры, дежурившие в указанном отделении;</li>
				<li>всех дежурствах (в любых палатах) в указанную смену в указанном отделении.</li>
			</ul>
			<br>
			<p><b>Вариант 4.</b> Создать и заполнить БД домашней фильмотеки, содержащей информацию про имеющиеся фильмы, сериалы, мультсериалы и т.д. Объекты фильмотеки описываются названием, годом выхода, типом носителя (видеокассета, CD, DVD, BR) и произвольным набором параметров, среди которых режиссер, актеры (может быть больше одного), жанр (может быть больше одного), страна выпуска и т.д.</p>
			<p>Предоставить пользователю возможность получения следующей информации:</p>
			<ul>
				<li>что можно посмотреть на видеокассетах;</li>
				<li>в каких фильмах участвовал выбранный актер;</li>
				<li>что посмотреть из нового (вышедшее в этом году).</li>
			</ul>
			<br>
			<p><b>Вариант 5.</b> Создать и заполнить БД товаров интернет–магазина (в одной коллекции). Для товара обязательно указывается название, цена товара, количество единиц на складе. Возможные поля - фирма-производитель, категория товара (процессоры, материнские платы и т.д.), отзывы (могут быть и более одного), состояние (новое или б/у) и т.д.</p>
			<p>Предоставить пользователю возможность получения следующей информации:</p>
			<ul>
				<li>перечень производителей, с которыми работает магазин;</li>
				<li>товары, отсутствующие на складе (т.е. вообще они есть, но сейчас количество 0);</li>
				<li>товары в выбранном ценовом диапазоне.</li>
			</ul>
			<br>
			<p><b>Вариант 6.</b> Создать и заполнить БД пункта проката автомобилей. В базе представлены две коллекции - коллекция документов, описывающая аренду (дата начала и завершения, стоимость аренды и марка машины), и коллекция, содержащая документы, которые описывают имеющиеся в пункте проката автомобили (марка, год выпуска, пробег, состояние (возможное поле)). Для хранения даты и времени в БД рекомендуется использовать формат Unix Timestamp.</p>
			<p>Предоставить пользователю возможность получения следующей информации:</p>
			<ul>
				<li>полученный доход с проката по состоянию на выбранную дату;</li>
				<li>автомобили с пробегом меньше указанного;</li>
				<li>имеющиеся в данном пункте марки автомобилей.</li>
			</ul>
			<br>
			<p><b>Вариант 7.</b> Создать и заполнить БД футбольного чемпионата. В базе представлены две коллекции - коллекция документов, описывающая команды (название, тренер, состав команды (массив футболистов)), и коллекция, содержащая документы, которые описывают игры чемпионата (лига, дата и место проведения, команды-участницы игры, победитель и т.д.).</p>
			<p>Предоставить пользователю возможность получения следующей информации:</p>
			<ul>
				<li>таблица чемпионата для выбранной лиги;</li>
				<li>список футболистов указанной команды;</li>
				<li>список игр, в которых участвовала выбранная команда.</li>
			</ul>
			<br>
			<p><b>Вариант 8.</b> Создать и заполнить БД для хранения информации об использовании сетевого трафика. В базе представлены две коллекции - коллекция документов, описывающая пользователей (логин, пароль, статический IP-адрес клиента, баланс счета, сообщения), и коллекция, содержащая документы, которые описывают сеансы выхода в Сеть: время начала и окончания сеанса работы, количество входящего трафика, количество исходящего трафика, IP-адрес клиента, стоимость сеанса.</p>
			<p>Предоставить пользователю возможность получения следующей информации:</p>
			<ul>
				<li>сообщения от выбранного клиента;</li>
				<li>общий входящий и исходящий трафик;</li>
				<li>вывести список клиентов с отрицательным балансом счета.</li>
			</ul>
			<br>
			<p><b>Вариант 9.</b> Создать и заполнить БД для хранения информации о компьютерах организации. В БД представлена одна коллекция, документы которой описывают компьютеры организации - инвентарный номер, год приобретения, срок гарантии, процессор, память, объем диска, установленное лицензионное ПО и т.д.</p>
			<p>Предоставить пользователю возможность получения следующей информации:</p>
			<ul>
				<li>список компьютеров с заданным типом центрального процессора;</li>
				<li>список компьютеров с установленным ПО (название ПО выбирается из перечня);</li>
				<li>список компьютеров с истекшим гарантийным сроком.</li>
			</ul>
		</div>
		
		<div class="chapter" id="lab_report">
			<span class="chapter_name">6. Содержание отчета</span>
			<ul>
				<li>титульный лист с указанием темы лабораторной, фамилии, инициалов и группы выполнивших студентов (до 3-х человек);</li> 
				<li>цель работы;</li> 
				<li>вариант задания;</li>
				<li>используемые команды консоли MongoDB для создания и заполнения БД;</li>
				<li>исходные коды РНР и JavaScript скриптов;</li>
				<li>результаты выполнения запросов в виде снимков экрана браузера;</li>
				<li>выводы по работе.</li>
			</ul>
			<p>Допускается сдача отчета в электронном виде. Для защиты наличие распечатанного отчета не является необходимым. При выкладывании на GitHub не забывайте про содержимое БД, используемое вашим кодом.</p>
		</div>
		
		<div class="chapter" id="lab_questions">
			<span class="chapter_name">7. Контрольные вопросы</span>
			<ol>
				<li>Какие NoSQL СУБД вам известны?</li>
				<li>Как, используя консоль MongoDB, создать и заполнить новую БД? Как выполнить поиск и изменение записей?</li>
				<li>Какие возможности языка PHP для работы с NoSQL СУБД MongoDB вам известны?</li>
				<li>Каким образом осуществляется управление подключениями к базам данных?</li>
				<li>В чем разница между методами find и findOne?</li>
				<li>Операторы для фильтрации выборки и их использование.</li>
				<li>Как ограничить выборку заданным числом документов?</li>
				<li>Как отсортировать документы в выборке по возрастанию значения определенного поля?</li>
				<li>Как убрать отображение ненужных (в этом запросе) полей документа?</li>
				<li>Как добавить множество документов в коллекцию?</li>
				<li>Для чего используется объект MongoDB\UpdateResult?</li>
				<li>Возможно ли отсутствие модифицированных документов при успешном выполнении метода updateOne и getMatchedCount больше 0?</li>
				<li>В чем заключается операция Upsert?</li>
				<li>Как удалить документы коллекции?</li>
				<li>Преимущества и недостатки использования WebStorage?</li>
				<li>В чем разница между localStorage и sessionStorage?</li>
				<li>Как сохранить данные в хранилище WebStorage?</li>
				<li>Можно ли сохранять в хранилище не-строковые данные?</li>
				<li>Для чего используются методы JSON.stringify и JSON.parse?</li>
				<li>В каких случаях возникает событие storage?</li>
				<li>Что происходит при переполнении хранилища?</li>				
			</ol>
			<p>Знание ответов на приведенные вопросы является необходимым, но не достаточным условием для получения высокой оценки за защиту лабораторной работы. Помните про темы, рассмотренные на лекциях!</p>
		</div>
		
		<div class="chapter" id="lab_literature">
			<span class="chapter_name">СПИСОК ЛИТЕРАТУРЫ</span>
			<ol>  
				<li><a href="http://coldfox.ru/article/5be022d49227d914a1c83fe3/Подробное-руководство-по-MongoDB-Mongoose" target="_blank">Подробное руководство по MongoDB</a></li>
				<li><a href="https://habr.com/ru/post/144798/" target="_blank">Моделирование данных в MongoDB</a></li>
				<li><a href="https://metanit.com/nosql/mongodb/" target="_blank">Онлайн-руководство по MongoDB</a></li>
				<li><a href="https://dzone.com/articles/top-10-most-common-commands-for-beginners" target="_blank">Commands for MongoDB Beginners</a></li>
				<li><a href="http://gearmobile.github.io/tags/#mongodb" target="_blank">Цикл статей о работе с Монго</a></li>
				<li><a href="https://getcomposer.org/" target="_blank">Dependency Manager for PHP</a></li>
				<li><a href="https://docs.mongodb.com/php-library/v1.5/tutorial/install-php-library/" target="_blank">MongoDB PHP Library</a></li>
				<li><a href="https://docs.mongodb.com/manual/crud/" target="_blank">MongoDB CRUD Operations</a></li>
				<li><a href="https://www.php.net/manual/ru/mongodb.tutorial.library.php" target="_blank">Использование библиотеки PHP для MongoDB</a></li>
				<li><a href="https://learn.javascript.ru/localstorage" target="_blank">LocalStorage, sessionStorage</a></li>
				<li><a href="https://html5css.ru/html/html5_webstorage.php" target="_blank">HTML5 Веб-хранилище</a></li>
				<li><a href="https://developer.mozilla.org/ru/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API" target="_blank">Использование WebStorage API</a></li>
			</ol>
		</div>
		<br><a href="#start">Вернуться к началу</a>
		<br><a href="..\..\index.html">Вернуться на стартовую страницу ресурса</a>
		<!-- Удачной отработки! --> 
	</div>
</body>
</html>
